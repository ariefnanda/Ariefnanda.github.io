<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Whack-a-Mole Sederhana</title>
    
    <style>
        /* CSS untuk tampilan game */
        body {
            font-family: 'BlinkMacSystemFont', 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            text-align: center;
            background-color: #556b2f; /* Hijau Olive Gelap (Warna Tanah) */
            color: #fff;
            padding: 20px;
        }

        .container {
            width: fit-content;
            margin: 0 auto;
            padding: 20px;
            background-color: #8fbc8f; /* Hijau Medium */
            border: 8px solid #a0522d; /* Cokelat Tanah */
            border-radius: 20px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.4);
        }

        h1 {
            color: #333;
            margin-bottom: 15px;
        }

        #scoreDisplay {
            font-size: 2em;
            font-weight: bold;
            color: #ff6347; /* Merah Tomat */
            margin-bottom: 20px;
        }
        
        #gameBoard {
            display: grid;
            grid-template-columns: repeat(3, 1fr); /* Grid 3x3 */
            gap: 15px;
            width: 330px; 
            height: 330px;
            margin: 0 auto;
        }

        .hole {
            background-color: #696969; /* Abu-abu Gelap (Lubang) */
            border: 5px solid #333;
            border-radius: 50%; /* Bentuk lingkaran */
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        .mole {
            position: absolute;
            font-size: 3em; /* Ukuran Tikus/Target */
            cursor: pointer;
            user-select: none;
            transition: transform 0.2s ease-out; /* Animasi muncul */
            transform: translateY(100%); /* Tersembunyi di awal */
        }
        
        .hole.up .mole {
            transform: translateY(0); /* Muncul ke atas */
        }

        .miss {
            color: red;
            font-size: 0.9em;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            animation: fadeout 1s forwards;
        }
        
        @keyframes fadeout {
            0% { opacity: 1; transform: translate(-50%, -50%); }
            100% { opacity: 0; transform: translate(-50%, -100%); }
        }

        #timerDisplay {
            margin-top: 15px;
            font-size: 1.5em;
            color: #ffcc00;
        }

        #startStopButton {
            padding: 10px 20px;
            font-size: 1.2em;
            margin-top: 20px;
            background-color: #3498db;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        #startStopButton:hover {
            background-color: #2980b9;
        }
        
    </style>
</head>
<body>

    <div class="container">
        <h1>üî® Pukul Tikus! (Whack-a-Mole)</h1>
        
        <div id="scoreDisplay">Skor: 0</div>
        <div id="timerDisplay">Waktu: 30 detik</div>

        <div id="gameBoard">
            </div>
        
        <button id="startStopButton" onclick="startGame()">Mulai Game</button>
    </div>

    <script>
        // Logika Game JavaScript
        const gameBoard = document.getElementById('gameBoard');
        const scoreDisplay = document.getElementById('scoreDisplay');
        const timerDisplay = document.getElementById('timerDisplay');
        const startStopButton = document.getElementById('startStopButton');

        // --- Variabel Game ---
        let score = 0;
        let time = 30; // Waktu game dalam detik
        let gameRunning = false;
        let moleTimerId; // Untuk mengontrol munculnya tikus
        let gameTimerId; // Untuk menghitung mundur waktu
        
        // Konstanta
        const NUM_HOLES = 9;
        const MOLE_EMOJI = 'üê≠';
        const HIT_EMOJI = 'üí•';

        // 1. Fungsi untuk memulai permainan
        function startGame() {
            if (gameRunning) return;

            // Reset state
            score = 0;
            time = 30;
            gameRunning = true;
            scoreDisplay.textContent = "Skor: 0";
            startStopButton.textContent = "Berjalan...";
            startStopButton.disabled = true;

            // Buat lubang jika belum ada
            if (gameBoard.children.length === 0) {
                createHoles();
            }

            // Mulai Timer Game (Hitung Mundur)
            gameTimerId = setInterval(countdown, 1000);
            
            // Mulai Timer Tikus (Spawn)
            moleTimerId = setInterval(peep, 1000); // Tikus muncul setiap 1 detik
        }

        // 2. Fungsi untuk menghitung mundur
        function countdown() {
            time--;
            timerDisplay.textContent = `Waktu: ${time} detik`;

            if (time <= 0) {
                endGame();
            }
        }

        // 3. Fungsi untuk mengakhiri permainan
        function endGame() {
            clearInterval(gameTimerId);
            clearInterval(moleTimerId);
            gameRunning = false;
            startStopButton.textContent = "Mulai Lagi";
            startStopButton.disabled = false;
            timerDisplay.textContent = `WAKTU HABIS! Skor Akhir: ${score}`;
            
            // Sembunyikan semua tikus yang mungkin masih muncul
            document.querySelectorAll('.hole').forEach(hole => {
                hole.classList.remove('up');
            });
        }

        // 4. Fungsi untuk membuat elemen lubang
        function createHoles() {
            for (let i = 0; i < NUM_HOLES; i++) {
                const hole = document.createElement('div');
                hole.classList.add('hole');
                hole.dataset.id = i;
                
                const mole = document.createElement('div');
                mole.classList.add('mole');
                mole.textContent = MOLE_EMOJI;
                mole.addEventListener('click', whackMole);

                hole.appendChild(mole);
                gameBoard.appendChild(hole);
            }
        }

        // 5. Fungsi agar tikus muncul
        function peep() {
            if (!gameRunning) return;
            
            const holes = document.querySelectorAll('.hole');
            
            // Pastikan tidak ada tikus yang sedang muncul
            holes
