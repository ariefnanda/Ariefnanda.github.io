<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Typing Race Sederhana</title>
    
    <style>
        /* CSS untuk tampilan game */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            text-align: center;
            background-color: #f0f8ff; /* AliceBlue */
            color: #333;
            padding: 20px;
        }

        .container {
            max-width: 700px;
            margin: 0 auto;
            padding: 30px;
            background-color: #ffffff;
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        h1 {
            color: #007bff;
            margin-bottom: 25px;
        }

        #targetText {
            font-size: 1.3em;
            padding: 20px;
            margin-bottom: 20px;
            border: 2px dashed #007bff;
            background-color: #e6f0ff;
            border-radius: 8px;
            text-align: left;
        }

        #inputText {
            width: 95%;
            padding: 15px;
            font-size: 1.2em;
            border: 2px solid #ccc;
            border-radius: 8px;
            box-sizing: border-box;
            resize: none; /* Nonaktifkan resize area teks */
            height: 100px;
            transition: border-color 0.3s;
        }
        
        .correct {
            border-color: #28a745 !important; /* Hijau */
        }
        
        .incorrect {
            border-color: #dc3545 !important; /* Merah */
        }

        #result {
            margin-top: 25px;
            font-size: 1.5em;
            font-weight: bold;
            color: #28a745;
        }
        
        #instructions {
            margin-top: 15px;
            color: #6c757d;
        }

        #resetButton {
            padding: 10px 20px;
            font-size: 1em;
            margin-top: 20px;
            background-color: #ffc107;
            color: #333;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        #resetButton:hover {
            background-color: #e0a800;
        }
    </style>
</head>
<body>

    <div class="container">
        <h1>⌨️ Game Balap Ketik</h1>
        
        <div id="targetText">Klik tombol "Mulai Ulang" di bawah untuk mendapatkan kalimat baru.</div>
        
        <textarea id="inputText" placeholder="Mulai mengetik di sini..." disabled></textarea>

        <div id="instructions">
            Ketepatan: <span id="accuracyDisplay">100%</span> | Karakter Salah: <span id="errorCount">0</span>
        </div>
        
        <div id="result"></div>
        
        <button id="resetButton" onclick="startGame()">Mulai Ulang</button>
    </div>

    <script>
        // Logika Game JavaScript
        const textSamples = [
            "Programmer yang baik menulis kode yang mudah dibaca, bukan hanya kode yang berfungsi.",
            "Semangat belajar adalah kunci utama untuk menguasai teknologi baru dengan cepat.",
            "Kreativitas sering muncul dari keterbatasan, gunakan batasan sebagai motivasi.",
            "Semua orang tahu bahwa waktu adalah uang, namun fokus lebih penting dari keduanya.",
            "Dengan ketekunan, Anda dapat mencapai tujuan yang terlihat mustahil pada awalnya."
        ];

        let targetText = "";
        let startTime = 0;
        let isTyping = false;
        let totalCharsTyped = 0;
        let errorCount = 0;

        // Mengambil elemen DOM
        const targetTextElement = document.getElementById('targetText');
        const inputTextElement = document.getElementById('inputText');
        const resultElement = document.getElementById('result');
        const accuracyDisplay = document.getElementById('accuracyDisplay');
        const errorCountDisplay = document.getElementById('errorCount');

        // 1. Fungsi untuk memulai/mereset game
        function startGame() {
            // Reset state
            isTyping = false;
            startTime = 0;
            totalCharsTyped = 0;
            errorCount = 0;

            // Pilih kalimat acak baru
            const randomIndex = Math.floor(Math.random() * textSamples.length);
            targetText = textSamples[randomIndex];

            // Reset tampilan
            targetTextElement.textContent = targetText;
            inputTextElement.value = '';
            inputTextElement.disabled = false;
            inputTextElement.focus();
            inputTextElement.classList.remove('correct', 'incorrect');
            resultElement.textContent = "Mulai mengetik ketika siap!";
            accuracyDisplay.textContent = '100%';
            errorCountDisplay.textContent = '0';
        }

        // 2. Fungsi yang dijalankan saat input teks berubah
        inputTextElement.addEventListener('input', () => {
            const typedText = inputTextElement.value;
            const target = targetText;
            
            // Mulai waktu saat karakter pertama diketik
            if (!isTyping && typedText.length > 0) {
                isTyping = true;
                startTime = new Date().getTime();
            }
            
            // --- Cek Kesalahan dan Akurasi ---
            let isMatch = true;
            let currentErrors = 0;
            
            for (let i = 0; i < typedText.length; i++) {
                if (typedText[i] !== target[i]) {
                    isMatch = false;
                    currentErrors++;
                }
            }
            
            totalCharsTyped = typedText.length;
            errorCount = currentErrors;

            const accuracy = totalCharsTyped === 0 ? 100 : ((totalCharsTyped - errorCount) / totalCharsTyped) * 100;
            accuracyDisplay.textContent = `${accuracy.toFixed(1)}%`;
            errorCountDisplay.textContent = errorCount;


            // Update visual border
            if (typedText.length === 0) {
                inputTextElement.classList.remove('correct', 'incorrect');
            } else if (!isMatch) {
                inputTextElement.classList.add('incorrect');
                inputTextElement.classList.remove('correct');
            } else {
                inputTextElement.classList.remove('incorrect');
                // Pengecekan Akhir
                if (typedText === target) {
                    inputTextElement.classList.add('correct');
                    finishGame();
                } else {
                    inputTextElement.classList.remove('correct');
                }
            }
        });

        // 3. Fungsi saat game selesai
        function finishGame() {
            if (!isTyping) return; // Jangan jalankan jika belum mengetik

            const endTime = new Date().getTime();
            const timeTaken = (endTime - startTime) / 1000; // Dalam detik
            
            // Hitung WPM (Words Per Minute) - diasumsikan 1 kata = 5 karakter
            const wordCount = targetText.length / 5;
            const wpm = (wordCount / timeTaken) * 60;

            resultElement.innerHTML = `
                ✨ Selesai! Waktu Anda: **${timeTaken.toFixed(2)} detik**.<br>
                Kecepatan: **${wpm.toFixed(0)} WPM** (Kata per Menit).
            `;
            
            inputTextElement.disabled = true;
            isTyping = false;
        }

        // --- Inisialisasi ---
        document.addEventListener('DOMContentLoaded', startGame);
    </script>
</body>
</html>
